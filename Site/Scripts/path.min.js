var Path={version:"0.8.4.1",map:function(n){return Path.routes.defined.hasOwnProperty(n)?Path.routes.defined[n]:new Path.core.route(n)},root:function(n){Path.routes.root=n},rescue:function(n){Path.routes.rescue=n},history:{initial:{},pushState:function(n,t,i){Path.history.supported?Path.dispatch(i)&&history.pushState(n,t,i):Path.history.fallback&&(window.location.hash="#"+i)},popState:function(){var n=!Path.history.initial.popped&&location.href==Path.history.initial.URL;(Path.history.initial.popped=!0,n)||Path.dispatch(document.location.hash)},listen:function(n){if(Path.history.supported=!!(window.history&&window.history.pushState),Path.history.fallback=n,Path.history.supported)Path.history.initial.popped="state"in window.history,Path.history.initial.URL=location.href,window.onpopstate=Path.history.popState,window.location.hash===""&&Path.routes.root!==null&&Path.history.pushState({},"",Path.routes.root);else if(Path.history.fallback){for(route in Path.routes.defined)route.charAt(0)!="#"&&(Path.routes.defined["#"+route]=Path.routes.defined[route],Path.routes.defined["#"+route].path="#"+route);Path.listen()}}},match:function(n,t){function s(n,t){for(var u=t.split("/"),f=!0,e={},r,i;f&&u.length&&n.length&&(r=/\/?([^\/]+)/.exec(n));n=n.substring(r[0].length))i=u.shift(),i.charAt(0)==":"?e[i.substring(1)]=r[1]:i!==r[1]&&(f=!1);return f&&0===u.length&&0===n.length?e:!1}var r={},i=null,f,e,u,o;for(i in Path.routes.defined)if(i!==null&&i!==undefined)for(i=Path.routes.defined[i],f=i.partition(),u=0;u<f.length;u++){if(e=f[u],o=n,r=s(o,e),r)return t&&(i.params=r),i;r={}}return null},dispatch:function(n){var t,i;if(Path.routes.current!==n){if(Path.routes.previous=Path.routes.current,Path.routes.current=n,i=Path.match(n,!0),Path.routes.previous&&(t=Path.match(Path.routes.previous),t!==null&&t.do_exit!==null&&t.do_exit()),i!==null)return i.run(),!0;Path.routes.rescue!==null&&Path.routes.rescue()}},listen:function(){var n=function(){Path.dispatch(window.location.hash)};window.location.hash===""&&Path.routes.root!==null&&(window.location.hash=Path.routes.root),"onhashchange"in window&&(!document.documentMode||document.documentMode>=8)?window.onhashchange=n:setInterval(n,50),window.location.hash!==""&&Path.dispatch(window.location.hash)},core:{route:function(n){this.path=n,this.action=null,this.do_enter=[],this.do_exit=null,this.params={},Path.routes.defined[n]=this}},routes:{current:null,root:null,rescue:null,previous:null,defined:{}}};Path.core.route.prototype={to:function(n){return this.action=n,this},enter:function(n){return n instanceof Array?this.do_enter=this.do_enter.concat(n):this.do_enter.push(n),this},exit:function(n){return this.do_exit=n,this},partition:function(){for(var i=[],n=[],u=/\(([^}]+?)\)/g,r,t;r=u.exec(this.path);)i.push(r[1]);for(n.push(this.path.split("(")[0]),t=0;t<i.length;t++)n.push(n[n.length-1]+i[t]);return n},run:function(){var t=!1,n,i;if(Path.routes.defined[this.path].hasOwnProperty("do_enter")&&Path.routes.defined[this.path].do_enter.length>0)for(n=0;n<Path.routes.defined[this.path].do_enter.length;n++)if(i=Path.routes.defined[this.path].do_enter[n].apply(this),i===!1){t=!0;break}t||Path.routes.defined[this.path].action(this.params)}};
//@ sourceMappingURL=path.min.js.map